<!DOCTYPE html>
<html>
	<head>
		<title>Time Management</title>
		<script src="https://unpkg.com/vue"></script>
		<style>
			.eventType, .rNewEvent {
				display: flex;
				justify-content: center;
				align-items: center;
			}
			.wrapper {
				display: flex;
				justify-content: center;
			}
			.rNewEvent, .fNewEvent {
				display: grid;
				grid-template-columns: 1fr;
				grid-gap: 16px;
				justify-content: center;
				align-items: center;
			}
			.schedule-item {
				display: grid;
				grid-template-columns: 1fr 1fr 1fr 1fr;
				grid-gap: 16px;
			}
		</style>
	</head>
	<body>
		<center>
			<h1>Today's Schedule</h1>
		</center>
		<div id="app">
			<div class="wrapper">
				<div class="schedule-item">
					<template v-for="item in events">
						<div>{{ item.startTime }}</div>
						<div>{{ item.endTime }}</div>
						<div>{{ item.desc }}</div>
						<button @click="remove_item(item.itemID)">Delete</button>
					</template>
				</div>
			</div>
			<p></p>
			<div class="eventType">
				<select v-model="priority">
					<option disabled value="">Please select one</option>
					<option>Required Time</option>
					<option>Flexible</option>
					<option>Due Date</option>
				</select>
			</div>
			<p></p>
			<div class="rNewEvent" v-if="priority == 'Required Time'">
				<div class="wrapper">
					<div>Description: &nbsp;</div>
					<input v-model="describe" placeholder="Description">
				</div>
				<div class="wrapper">
					<div>Start Time: &nbsp;</div>
					<select v-model="startHour">
						<option disabled value=""></option>
							<template v-for="n in 12">
								<option>{{ n }}</option>
							</template>
					</select>
					<div>&nbsp;:&nbsp;</div>
					<select v-model="startMin">
						<option disabled value=""></option>
						<template v-for="n in 60">
							<template v-if="n < 11">
								<option>{{ '0' + (n - 1) }}</option>
							</template>
							<template v-else>
								<option>{{ (n - 1) }}</option>
							</template>
						</template>
					</select>
					<div>&nbsp;</div>
					<select v-model="startMOA">
						<option disabled value=""></option>
						<option>AM</option>
						<option>PM</option>
					</select>
				</div>
				<div class="wrapper">
					<div>End Time: &nbsp;</div>
					<select v-model="endHour">
						<option disabled value=""></option>
							<template v-for="n in 12">
								<option>{{ n }}</option>
							</template>
					</select>
					<div>&nbsp;:&nbsp;</div>
					<select v-model="endMin">
						<option disabled value=""></option>
						<template v-for="n in 60">
							<template v-if="n < 11">
								<option>{{ '0' + (n - 1) }}</option>
							</template>
							<template v-else>
								<option>{{ (n - 1) }}</option>
							</template>
						</template>
					</select>
					<div>&nbsp;</div>
					<select v-model="endMOA">
						<option disabled value=""></option>
						<option>AM</option>
						<option>PM</option>
					</select>
				</div>
				<div class="wrapper">
					<button v-on:click="add_req()">Submit</button>
				</div>
			</div>
			<div class="fNewEvent" v-if="priority == 'Flexible'">
				<div class="wrapper">
					<div>Description: &nbsp;</div>
					<input v-model="describe" placeholder="Description">
				</div>
				<div class="wrapper">
					<div>Hours: &nbsp;</div>
					<select v-model="hours">
						<template v-for="n in 13">
							<option>{{ (n - 1) }}</option>
						</template>
					</select>
				</div>
				<div class="wrapper">
					<div>Minutes: &nbsp;</div>
					<select v-model="minutes">
						<template v-for="n in 60">
							<option>{{ (n - 1) }}</option>
						</template>
					</select>
				</div>
			</div>
		</div>
	</body>
	<script>
		var app = new Vue({
			el: "#app",
			data: {
				describe: "",
				startHour: "",
				startMin: "",
				startMOA: "",
				endHour: "",
				endMin: "",
				endMOA: "",
				start: "",
				end: "",
				priority: "",
				events: [],
				reqEvents: [],
				flexEvents: [],
				dueEvents: [],
				currentID: 0,
			},
			methods: {
				add_req: function(){
					if (this.startMOA == "PM" && this.startHour != 12){
						this.startHour = this.startHour + 12
					} else if (this.startMOA == "AM" && this.startHour == 12){
						this.startHour = 0
					}
					if (this.endMOA == "PM" && this.endHour != 12){
						this.endHour = this.endHour + 12
					} else if (this.endMOA == "AM" && this.endHour == 12){
						this.endHour = 0
					}
					this.day = new Date();
					this.start = new Date(this.day.getYear(), this.day.getMonth(), this.day.getDate(), this.startHour, this.startMin);
					this.end = new Date(this.day.getYear(), this.day.getMonth(), this.day.getDate(), this.endHour, this.endMin);
					this.start;
					var item = {
						itemID: this.currentID + 1,
						startTime: this.start,
						endTime: this.end,
						desc: this.describe,
					}
					this.currentID += 1;
					this.reqEvents.push(item);
					this.listItems();
				},
				listItems: function(){
					for (this.event in this.reqEvents){
						this.startTime = this.event.startTime;
						if (this.startTime.getHours() == 0){
							this.start = 12 + ":" + this.startTime.getMinutes() + " AM"; 
						} else if (this.event.startTime.getHours() > 12){
							this.start = (this.startTime.getHours() + 12)  + ":" + this.startTime.getMinutes() + " AM";
						} else if (this.startTime.getHours() == 12){
							this.start = 12 + ":" + this.startTime.getMinutes() + " PM";
						} else {
							this.start = this.startTime.getHours() + ":" + this.startTime.getMinutes() + " AM";
						}
						if (this.event.endTime.getHours() == 0){
							this.end = 12 + ":" + this.event.endTime.getMinutes() + " AM";
						} else if (this.event.endTime.getHours() > 12){
							this.end = (this.event.endTime.getHours() + 12)  + ":" + this.event.endTime.getMinutes() + " AM";
						} else if (this.event.endTime.getHours() == 12){
							this.end = 12 + ":" + this.event.endTime.getHours() + " PM";
						} else {
							this.end = this.event.endTime.getHours() + ":" + this.event.endTime.getMinutes() + " AM";
						}
						var item = {
							itemID: this.event.itemID,
							startTime: this.start,
							endTime: this.end,
							desc: this.event.desc,
						}
						this.events.push(item);
					}
				},
				remove_item: function(itemID){
          			this.events = this.events.filter((item) => { return item.itemID !== itemID });
				}
			}	
		});
	</script>
</html>
